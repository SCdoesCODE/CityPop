(this.webpackJsonpcitypop=this.webpackJsonpcitypop||[]).push([[0],{18:function(e,t,n){},30:function(e,t,n){e.exports=n(43)},43:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),s=n(27),c=n.n(s),r=n(10),i=n(11),l=n(13),u=n(12),h=n(7),m=(n(18),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={showScopePage:!0},e.hideScopePage=function(){e.setState({showScopePage:!1})},e}return Object(i.a)(n,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,this.state.showScopePage?o.a.createElement("div",{className:"center"},o.a.createElement("div",{className:"citypoptext"},"CityPop"),o.a.createElement(h.b,{to:"./SearchCity"},o.a.createElement("button",{className:"button",onClick:this.hideScopePage},"SEARCH BY CITY")),o.a.createElement(h.b,{to:"./SearchCountry"},o.a.createElement("button",{className:"button",onClick:this.hideScopePage},"SEARCH BY COUNTRY"))):null)}}]),n}(a.Component));var p=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(m,null))},d=n(14),y=n.n(d),C=n(20),E=n(15),f=n(16),g=n(21),v=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).cities=[],e.state={showLoading:!1,country:"",countryInput:"",searchingForNewCountry:!1,displayCities:!1,oneCityChosen:!1,chosenCityName:"",chosenCityPop:"",countryCodeError:!1},e.handleSearch=function(){e.makeApiCall(e.state.countryInput),e.setState({searchingForNewCountry:!0,showLoading:!0})},e.handleOnChange=function(t){e.setState({countryInput:t.target.value})},e.handleOnKeyDown=function(t){"Enter"===t.key&&e.handleSearch()},e.handleOnKeyPressed=function(t){e.setState({oneCityChosen:!0,chosenCityName:e.cities[t].name,chosenCityPop:e.cities[t].population}),e.undoResults()},e}return Object(i.a)(n,[{key:"makeApiCall",value:function(){var e=Object(C.a)(y.a.mark((function e(t){var n,a,o,s,c,r,i,l=this;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="https://restcountries.eu/rest/v2/name/"+t+"?fullText=true",e.next=3,fetch(n);case 3:return a=e.sent,e.next=6,a.json();case 6:if(404===(o=e.sent).status&&this.setState({countryCodeError:!0,showLoading:!1}),console.log(o.status),this.state.countryCodeError){e.next=22;break}return s=o[0].alpha2Code,c="http://api.geonames.org/searchJSON?&country="+s+"&featureCode=PPLA&featureCode=PPLC&username=weknowit",e.next=14,fetch(c);case 14:return r=e.sent,e.next=17,r.json();case 17:i=e.sent,console.log(i.geonames.length),i.geonames.forEach((function(e){l.cities.push({population:e.population,name:e.name})})),this.cities.sort((function(e,t){return e.population>t.population?-1:1})),this.setState({country:i.geonames[0].countryName,showLoading:!1,displayCities:!0});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"undoResults",value:function(){this.divResults=[],this.cities=[]}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"center"},o.a.createElement(h.b,{to:"./ChooseScope"},o.a.createElement(E.a,{className:"homebutton",icon:f.a,size:"2x"})),o.a.createElement("div",{className:"citypoptext"},"CityPop"),this.state.searchingForNewCountry?null:o.a.createElement("h1",null,"SEARCH BY COUNTRY"),this.state.countryCodeError?o.a.createElement("h1",null,'Could not find "',this.state.countryInput,'"'):null,this.state.oneCityChosen?null:o.a.createElement("h1",null,this.state.country.toUpperCase()),!this.state.displayCities&!this.state.countryCodeError?o.a.createElement("div",null,o.a.createElement("input",{className:"searchbox",name:"text",type:"text",placeholder:"Enter a country",onKeyDown:function(t){return e.handleOnKeyDown(t)},onChange:function(t){return e.handleOnChange(t)},value:this.state.countryInput}),o.a.createElement("div",null,o.a.createElement(E.a,{className:"searchbutton",onClick:this.handleSearch,icon:f.b,size:"2x"}))):this.state.oneCityChosen&!this.state.countryCodeError?o.a.createElement("div",null,o.a.createElement("h1",null,this.state.chosenCityName.toUpperCase()),o.a.createElement("div",{className:"resultcontainer"},o.a.createElement("div",{className:"chosencitybox"},o.a.createElement("span",{className:"newline"},"POPULATION"),o.a.createElement("h1",null,this.state.chosenCityPop.toLocaleString().replace(/,/g," "))))):this.state.countryCodeError?null:o.a.createElement("div",null,o.a.createElement("br",null),o.a.createElement("div",{className:"resultcontainer"},o.a.createElement("br",null),o.a.createElement("div",{onClick:function(){e.handleOnKeyPressed(0)},className:"resultbox"},this.cities[0].name),o.a.createElement("div",{onClick:function(){e.handleOnKeyPressed(1)},className:"resultbox"},this.cities[1].name),o.a.createElement("div",{onClick:function(){e.handleOnKeyPressed(2)},className:"resultbox"},this.cities[2].name))),o.a.createElement("div",{className:"loadingspinner"}," ",o.a.createElement(g.a,{color:"#000000",loading:this.state.showLoading})))}}]),n}(a.Component),b=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={beforeSearch:!0,showLoading:!1,city:"",cityInput:"",displayCityPop:!1,cityNotFound:!1,nonValidInput:!1},e.handleBack=function(){e.props.history.goBack()},e.handleOnChange=function(t){e.setState({cityInput:t.target.value})},e.handleOnKeyDown=function(t){"Enter"===t.key&&e.handleSearch()},e.handleSearch=function(){e.setState({showLoading:!0,beforeSearch:!1}),e.makeApiCall(e.state.cityInput)},e}return Object(i.a)(n,[{key:"makeApiCall",value:function(){var e=Object(C.a)(y.a.mark((function e(t){var n,a,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!/\d+/g.test(t)&&!/[!@#$%^&*(),.?":{}|<>]/g.test(t)){e.next=4;break}this.setState({nonValidInput:!0,showLoading:!1}),e.next=15;break;case 4:return n="http://api.geonames.org/searchJSON?name_equals="+t+"&maxRows=1&username=weknowit",e.next=8,fetch(n);case 8:return a=e.sent,e.next=11,a.json();case 11:0===(o=e.sent).geonames.length&&this.setState({cityNotFound:!0}),this.setState({city:o.geonames[0]}),this.setState({showLoading:!1,displayCityPop:!0});case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"center"},o.a.createElement(h.b,{to:"./ChooseScope"},o.a.createElement(E.a,{className:"homebutton",icon:f.a,size:"2x"})),o.a.createElement("div",{className:"citypoptext"},"CityPop"),this.state.displayCityPop|this.state.nonValidInput?null:o.a.createElement("div",null,o.a.createElement("h1",null,"SEARCH BY CITY"),o.a.createElement("input",{className:"searchbox",name:"text",type:"text",placeholder:"Enter a city",onKeyDown:function(t){return e.handleOnKeyDown(t)},onChange:function(t){return e.handleOnChange(t)},value:this.state.cityInput}),o.a.createElement("div",null,o.a.createElement(E.a,{className:"searchbutton",onClick:this.handleSearch,icon:f.b,size:"2x"}))),this.state.displayCityPop&!this.state.cityNotFound?o.a.createElement("div",null,o.a.createElement("h1",null,this.state.city.name),o.a.createElement("div",{className:"chosencitybox"},o.a.createElement("span",{className:"newline"},"POPULATION"),o.a.createElement("h1",null,this.state.city.population.toLocaleString().replace(/,/g," ")))):null,this.state.nonValidInput?o.a.createElement("h1",null,"Please input a valid city name"):null,this.state.cityNotFound?o.a.createElement("h1",null,'Could not find "',this.state.cityInput,'"'):null,o.a.createElement("div",{className:"loadingspinner"}," ",o.a.createElement(g.a,{color:"#000000",loading:this.state.showLoading})))}}]),n}(a.Component),N=n(8);c.a.render(o.a.createElement(h.a,null,o.a.createElement(p,null),o.a.createElement(N.c,null,o.a.createElement(N.a,{path:"/ChooseScope",component:m}),o.a.createElement(N.a,{path:"/SearchCountry",component:v}),o.a.createElement(N.a,{path:"/SearchCity",component:b}))),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.21c82ae1.chunk.js.map